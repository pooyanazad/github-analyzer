<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>GitHub Repository Analyzer</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
    <link href="{{ url_for('static', filename='style.css') }}" rel="stylesheet">
</head>
<body>
    <div class="container-fluid">
        <!-- Header -->
        <header class="row bg-dark text-white py-4 mb-4">
            <div class="col-12 text-center">
                <h1 class="display-4"><i class="fab fa-github"></i> GitHub Repository Analyzer</h1>
                <p class="lead">Analyze any public GitHub repository for code quality, structure, and health metrics</p>
                <div class="mt-4">
                    <h5 class="text-info mb-3">What We Check:</h5>
                    <div class="row g-3">
                        <div class="col-md-6 col-lg-4">
                            <div class="card bg-primary text-white h-100">
                                <div class="card-body text-center py-2">
                                    <i class="fas fa-code fa-lg mb-1"></i>
                                    <h6 class="card-title mb-1" style="font-size: 0.9rem;">Code Quality</h6>
                                    <p class="card-text" style="font-size: 0.7rem;">Complexity, maintainability, and technical debt</p>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-6 col-lg-4">
                            <div class="card bg-danger text-white h-100">
                                <div class="card-body text-center py-2">
                                    <i class="fas fa-shield-alt fa-lg mb-1"></i>
                                    <h6 class="card-title mb-1" style="font-size: 0.9rem;">Security</h6>
                                    <p class="card-text" style="font-size: 0.7rem;">Potential vulnerabilities and sensitive files</p>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-6 col-lg-4">
                            <div class="card bg-warning text-white h-100">
                                <div class="card-body text-center py-2">
                                    <i class="fas fa-folder-tree fa-lg mb-1"></i>
                                    <h6 class="card-title mb-1" style="font-size: 0.9rem;">Project Structure</h6>
                                    <p class="card-text" style="font-size: 0.7rem;">Documentation, CI/CD, and organization</p>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-6 col-lg-4">
                            <div class="card bg-success text-white h-100">
                                <div class="card-body text-center py-2">
                                    <i class="fas fa-chart-line fa-lg mb-1"></i>
                                    <h6 class="card-title mb-1" style="font-size: 0.9rem;">Metrics</h6>
                                    <p class="card-text" style="font-size: 0.7rem;">File statistics, languages, and complexity scores</p>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-6 col-lg-4">
                            <div class="card bg-info text-white h-100">
                                <div class="card-body text-center py-2">
                                    <i class="fas fa-heartbeat fa-lg mb-1"></i>
                                    <h6 class="card-title mb-1" style="font-size: 0.9rem;">Repository Health</h6>
                                    <p class="card-text" style="font-size: 0.7rem;">Activity, maintenance, and community engagement</p>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-6 col-lg-4">
                            <div class="card bg-secondary text-white h-100">
                                <div class="card-body text-center py-2">
                                    <i class="fas fa-play fa-lg mb-1"></i>
                                    <h6 class="card-title mb-1" style="font-size: 0.9rem;">How to Use</h6>
                                    <p class="card-text" style="font-size: 0.7rem;">Enter a GitHub URL and click "Analyze"</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </header>

        <!-- Main Content -->
        <main class="row">
            <div class="col-12">
                <!-- Input Form -->
                {% if not analysis %}
                <div class="card mb-4">
                    <div class="card-header bg-primary text-white">
                        <h3 class="card-title mb-0"><i class="fas fa-search"></i> Repository Analysis</h3>
                    </div>
                    <div class="card-body">
                        <form method="POST" class="needs-validation" novalidate>
                            <div class="row">
                                <div class="col-md-10">
                                    <div class="form-group">
                                        <label for="github_url" class="form-label">GitHub Repository URL:</label>
                                        <input type="url" 
                                               class="form-control form-control-lg" 
                                               id="github_url" 
                                               name="github_url" 
                                               placeholder="https://github.com/user/repository"
                                               value="{{ github_url or '' }}"
                                               required>
                                        <div class="form-text text-white">Enter a public GitHub repository URL (e.g., https://github.com/user/repo)</div>
                                        <div class="invalid-feedback">Please provide a valid GitHub repository URL.</div>
                                    </div>
                                </div>
                                <div class="col-md-2 d-flex align-items-end">
                                    <button type="submit" class="btn btn-primary btn-lg w-100">
                                        <i class="fas fa-chart-line"></i> Analyze
                                    </button>
                                </div>
                            </div>
                        </form>
                    </div>
                </div>
                {% endif %}

                <!-- Flash Messages -->
                {% with messages = get_flashed_messages(with_categories=true) %}
                    {% if messages %}
                        {% for category, message in messages %}
                            <div class="alert alert-{{ 'danger' if category == 'error' else 'info' }} alert-dismissible fade show" role="alert">
                                <i class="fas fa-{{ 'exclamation-triangle' if category == 'error' else 'info-circle' }}"></i>
                                {{ message }}
                                <button type="button" class="btn-close" data-bs-dismiss="alert"></button>
                            </div>
                        {% endfor %}
                    {% endif %}
                {% endwith %}

                <!-- Return Button -->
                {% if analysis %}
                <div class="text-center mb-4">
                    <button onclick="window.location.href = window.location.pathname" class="btn btn-outline-primary btn-lg">
                        <i class="fas fa-arrow-left"></i> Analyze Another Repository
                    </button>
                </div>
                {% endif %}

                <!-- Analysis Results -->
                {% if analysis %}
                <div class="analysis-results">
                    <!-- Repository Overview -->
                    <div class="card mb-4">
                        <div class="card-header bg-success text-white">
                            <h3 class="card-title mb-0"><i class="fas fa-info-circle"></i> Repository Overview</h3>
                        </div>
                        <div class="card-body">
                            <div class="row">
                                <div class="col-md-8">
                                    <h4>{{ analysis.repository.full_name }}</h4>
                                    <p class="text-white">{{ analysis.repository.description }}</p>
                                    <div class="row mt-3">
                                        <div class="col-sm-6">
                                            <strong>Primary Language:</strong> {{ analysis.code_metrics.primary_language or analysis.repository.language or 'Not specified' }}<br>
                                            <strong>Repository Size:</strong> {{ analysis.repository.size }} KB<br>
                                            <strong>Created:</strong> {{ analysis.repository.created_at[:10] }}<br>
                                        </div>
                                        <div class="col-sm-6">
                                            <strong>Last Updated:</strong> {{ analysis.repository.updated_at[:10] }}<br>
                                            <strong>Last Push:</strong> {{ analysis.repository.pushed_at[:10] }}<br>
                                            <strong>Default Branch:</strong> {{ analysis.repository.default_branch }}<br>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-md-4">
                                    <div class="text-center">
                                        <div class="row">
                                            <div class="col-4">
                                                <div class="metric-box">
                                                    <i class="fas fa-star text-warning"></i>
                                                    <div class="metric-number">{{ analysis.repository.stars }}</div>
                                                    <div class="metric-label">Stars</div>
                                                </div>
                                            </div>
                                            <div class="col-4">
                                                <div class="metric-box">
                                                    <i class="fas fa-code-branch text-info"></i>
                                                    <div class="metric-number">{{ analysis.repository.forks }}</div>
                                                    <div class="metric-label">Forks</div>
                                                </div>
                                            </div>
                                            <div class="col-4">
                                                <div class="metric-box">
                                                    <i class="fas fa-exclamation-circle text-danger"></i>
                                                    <div class="metric-number">{{ analysis.repository.issues }}</div>
                                                    <div class="metric-label">Issues</div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Code Metrics -->
                    <div class="card mb-4">
                        <div class="card-header bg-info text-white">
                            <h3 class="card-title mb-0"><i class="fas fa-code"></i> Code Metrics</h3>
                        </div>
                        <div class="card-body">
                            <div class="row">
                                <div class="col-md-6">
                                    <h5>File Statistics</h5>
                                    <ul class="list-unstyled">
                                        <li><strong>Total Files:</strong> {{ analysis.code_metrics.total_files }}</li>
                                        <li><strong>Code Files:</strong> {{ analysis.code_metrics.code_files }}</li>
                                        <li><strong>Total Lines:</strong> {{ analysis.code_metrics.total_lines }}</li>
                                        <li><strong>Code Lines:</strong> {{ analysis.code_metrics.code_lines }}</li>
                                        <li><strong>Comment Lines:</strong> {{ analysis.code_metrics.comment_lines }}</li>
                                        <li><strong>Blank Lines:</strong> {{ analysis.code_metrics.blank_lines }}</li>
                                    </ul>
                                </div>
                                <div class="col-md-6">
                                    <h5>Languages Used</h5>
                                    {% if analysis.code_metrics.languages %}
                                        <div class="language-list">
                                            {% for language, count in analysis.code_metrics.languages.items() %}
                                                <div class="language-item">
                                                    <span class="language-name">{{ language }}</span>
                                                    <span class="badge bg-secondary">{{ count }} files</span>
                                                </div>
                                            {% endfor %}
                                        </div>
                                    {% else %}
                                        <p class="text-muted">No programming languages detected</p>
                                    {% endif %}
                                    
                                    <div class="mt-3">
                                        <h6>Complexity Score: 
                                            <span class="badge bg-{{ 'danger' if analysis.code_metrics.complexity_score == 'High' else 'warning' if analysis.code_metrics.complexity_score == 'Medium' else 'success' }}">
                                                {{ analysis.code_metrics.complexity_score }}
                                            </span>
                                        </h6>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Project Structure -->
                    <div class="card mb-4">
                        <div class="card-header bg-warning text-dark">
                            <h3 class="card-title mb-0"><i class="fas fa-folder-tree"></i> Project Structure</h3>
                        </div>
                        <div class="card-body">
                            <div class="row">
                                <div class="col-md-6">
                                    <h5>Project Organization</h5>
                                    <div class="organization-checklist">
                                        <div class="form-check">
                                            <input class="form-check-input" type="checkbox" {{ 'checked' if analysis.project_structure.has_readme else '' }} disabled>
                                            <label class="form-check-label">README file</label>
                                        </div>
                                        <div class="form-check">
                                            <input class="form-check-input" type="checkbox" {{ 'checked' if analysis.project_structure.has_license else '' }} disabled>
                                            <label class="form-check-label">LICENSE file</label>
                                        </div>
                                        <div class="form-check">
                                            <input class="form-check-input" type="checkbox" {{ 'checked' if analysis.project_structure.has_contributing else '' }} disabled>
                                            <label class="form-check-label">CONTRIBUTING guide</label>
                                        </div>
                                        <div class="form-check">
                                            <input class="form-check-input" type="checkbox" {{ 'checked' if analysis.project_structure.has_tests else '' }} disabled>
                                            <label class="form-check-label">Test directory</label>
                                        </div>
                                        <div class="form-check">
                                            <input class="form-check-input" type="checkbox" {{ 'checked' if analysis.project_structure.has_docs else '' }} disabled>
                                            <label class="form-check-label">Documentation</label>
                                        </div>
                                        <div class="form-check">
                                            <input class="form-check-input" type="checkbox" {{ 'checked' if analysis.project_structure.has_ci_cd else '' }} disabled>
                                            <label class="form-check-label">CI/CD configuration</label>
                                        </div>
                                    </div>
                                    <div class="mt-3">
                                        <h6>Organization Score: 
                                            <span class="badge bg-{{ 'success' if analysis.project_structure.organization_score >= 8 else 'warning' if analysis.project_structure.organization_score >= 5 else 'danger' }}">
                                                {{ analysis.project_structure.organization_score }}/10
                                            </span>
                                        </h6>
                                    </div>
                                </div>
                                <div class="col-md-6">
                                    <h5>Build Systems & Dependencies</h5>
                                    {% if analysis.build_systems.detected_systems %}
                                        <div class="build-systems">
                                            {% for system in analysis.build_systems.detected_systems %}
                                                <span class="badge bg-primary me-1 mb-1">{{ system }}</span>
                                            {% endfor %}
                                        </div>
                                        <p class="mt-2"><strong>Dependencies:</strong> {{ analysis.build_systems.dependencies_count }}</p>
                                        {% if analysis.build_systems.build_files %}
                                            <p><strong>Build Files:</strong></p>
                                            <ul class="list-unstyled">
                                                {% for file in analysis.build_systems.build_files %}
                                                    <li><i class="fas fa-file"></i> {{ file }}</li>
                                                {% endfor %}
                                            </ul>
                                        {% endif %}
                                    {% else %}
                                        <p class="text-muted">No build systems detected</p>
                                    {% endif %}
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Security Analysis -->
                    <div class="card mb-4">
                        <div class="card-header bg-danger text-white">
                            <h3 class="card-title mb-0"><i class="fas fa-shield-alt"></i> Security Analysis</h3>
                        </div>
                        <div class="card-body">
                            <div class="row">
                                <div class="col-md-6">
                                    <h5>Security Score: 
                                        <span class="badge bg-{{ 'success' if analysis.security.security_score >= 8 else 'warning' if analysis.security.security_score >= 5 else 'danger' }}">
                                            {{ "%.1f"|format(analysis.security.security_score) }}/10
                                        </span>
                                    </h5>
                                    
                                    {% if analysis.security.potential_issues %}
                                        <h6 class="mt-3">Potential Issues:</h6>
                                        <ul class="list-group list-group-flush">
                                            {% for issue in analysis.security.potential_issues %}
                                                <li class="list-group-item d-flex justify-content-between align-items-center">
                                                    <div>
                                                        <strong>{{ issue.type.replace('_', ' ').title() }}</strong><br>
                                                        <small class="text-muted">{{ issue.file }}</small>
                                                    </div>
                                                    <span class="badge bg-{{ 'danger' if issue.severity == 'High' else 'warning' if issue.severity == 'Medium' else 'info' }}">{{ issue.severity }}</span>
                                                </li>
                                            {% endfor %}
                                        </ul>
                                    {% else %}
                                        <p class="text-success"><i class="fas fa-check-circle"></i> No obvious security issues detected</p>
                                    {% endif %}
                                </div>
                                <div class="col-md-6">
                                    {% if analysis.security.sensitive_files %}
                                        <h6>Sensitive Files Found:</h6>
                                        <ul class="list-unstyled">
                                            {% for file in analysis.security.sensitive_files %}
                                                <li class="text-warning"><i class="fas fa-exclamation-triangle"></i> {{ file }}</li>
                                            {% endfor %}
                                        </ul>
                                    {% endif %}
                                    
                                    {% if analysis.security.recommendations %}
                                        <h6>Security Recommendations:</h6>
                                        <ul class="list-unstyled">
                                            {% for rec in analysis.security.recommendations %}
                                                <li><i class="fas fa-arrow-right text-primary"></i> {{ rec }}</li>
                                            {% endfor %}
                                        </ul>
                                    {% endif %}
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Code Quality Analysis -->
                    <div class="card mb-4">
                        <div class="card-header bg-info text-white">
                            <h3 class="card-title mb-0"><i class="fas fa-code"></i> Code Quality Analysis</h3>
                        </div>
                        <div class="card-body">
                            <div class="row">
                                <div class="col-md-6">
                                    <h5>Overall Quality Score: 
                                        <span class="badge bg-{{ 'success' if analysis.code_quality.overall_score >= 8 else 'warning' if analysis.code_quality.overall_score >= 5 else 'danger' }}">
                                            {{ "%.1f"|format(analysis.code_quality.overall_score) }}/10
                                        </span>
                                    </h5>
                                    
                                    <div class="mt-3">
                                        <h6>Quality Metrics:</h6>
                                        <div class="row">
                                            <div class="col-sm-6">
                                                <h6>Maintainability</h6>
                                                <div class="progress mb-2">
                                                    <div class="progress-bar bg-success" style="width: {{ analysis.code_quality.maintainability_score * 10 }}%"></div>
                                                </div>
                                                <small>{{ "%.1f"|format(analysis.code_quality.maintainability_score) }}/10</small>
                                            </div>
                                            <div class="col-sm-6">
                                                <h6>Complexity</h6>
                                                <div class="progress mb-2">
                                                    <div class="progress-bar bg-{{ 'success' if analysis.code_quality.complexity_metrics.avg_complexity <= 5 else 'warning' if analysis.code_quality.complexity_metrics.avg_complexity <= 10 else 'danger' }}" style="width: {{ (10 - analysis.code_quality.complexity_metrics.avg_complexity) * 10 if analysis.code_quality.complexity_metrics.avg_complexity <= 10 else 0 }}%"></div>
                                                </div>
                                                <small>Avg: {{ "%.1f"|format(analysis.code_quality.complexity_metrics.avg_complexity) }}</small>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-md-6">
                                    <h6>Language Distribution:</h6>
                                    {% if analysis.code_quality.languages %}
                                        <div class="language-stats">
                                            {% for lang, stats in analysis.code_quality.languages.items() %}
                                                <div class="mb-2">
                                                    <div class="d-flex justify-content-between">
                                                        <span><strong>{{ lang }}</strong></span>
                                                        <span>{{ stats.files }} files</span>
                                                    </div>
                                                    <div class="d-flex justify-content-between small text-muted">
                                                        <span class="text-white">Avg Complexity: {{ "%.1f"|format(stats.avg_complexity) }}</span>
                                                        <span class="text-white">{{ stats.lines }} lines</span>
                                                    </div>
                                                </div>
                                            {% endfor %}
                                        </div>
                                    {% else %}
                                        <p class="text-muted">No code files analyzed</p>
                                    {% endif %}
                                </div>
                            </div>
                            
                            {% if analysis.code_quality.issues %}
                            <div class="mt-4">
                                <h6>Code Quality Issues:</h6>
                                <div class="row">
                                    <div class="col-12">
                                        <p class="text-muted">Found {{ analysis.code_quality.issues|length }} code quality issues. <a href="#" class="text-primary" data-bs-toggle="modal" data-bs-target="#allIssuesModal">View all issues</a></p>
                                    </div>
                                </div>
                            </div>
                            {% endif %}
                        </div>
                    </div>

                    <!-- Repository Health -->
                    <div class="card mb-4">
                        <div class="card-header bg-secondary text-white">
                            <h3 class="card-title mb-0"><i class="fas fa-heartbeat"></i> Repository Health</h3>
                        </div>
                        <div class="card-body">
                            <div class="row">
                                <div class="col-md-4">
                                    <div class="text-center">
                                        <h5>Overall Health</h5>
                                        <div class="health-indicator health-{{ analysis.health_indicators.overall_health.lower() }}">
                                            {{ analysis.health_indicators.overall_health }}
                                        </div>
                                    </div>
                                </div>
                                <div class="col-md-8">
                                    <div class="row">
                                        <div class="col-sm-4">
                                            <h6>Activity Score</h6>
                                            <div class="progress mb-2">
                                                <div class="progress-bar bg-info" style="width: {{ analysis.health_indicators.activity_score * 10 }}%"></div>
                                            </div>
                                            <small>{{ analysis.health_indicators.activity_score }}/10</small>
                                        </div>
                                        <div class="col-sm-4">
                                            <h6>Maintenance Score</h6>
                                            <div class="progress mb-2">
                                                <div class="progress-bar bg-warning" style="width: {{ analysis.health_indicators.maintenance_score * 10 }}%"></div>
                                            </div>
                                            <small>{{ analysis.health_indicators.maintenance_score }}/10</small>
                                        </div>
                                        <div class="col-sm-4">
                                            <h6>Community Score</h6>
                                            <div class="progress mb-2">
                                                <div class="progress-bar bg-success" style="width: {{ analysis.health_indicators.community_score * 10 }}%"></div>
                                            </div>
                                            <small>{{ analysis.health_indicators.community_score }}/10</small>
                                        </div>
                                    </div>
                                    <div class="mt-3">
                                        <p><strong>Repository Age:</strong> {{ analysis.health_indicators.age_days }} days</p>
                                        <p><strong>Last Commit:</strong> {{ analysis.health_indicators.last_commit[:10] }}</p>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Recommendations -->
                    {% if analysis.recommendations %}
                    <div class="card mb-4">
                        <div class="card-header bg-primary text-white">
                            <h3 class="card-title mb-0"><i class="fas fa-lightbulb"></i> Recommendations</h3>
                        </div>
                        <div class="card-body">
                            <div class="row">
                                <div class="col-12">
                                    <ul class="list-group list-group-flush">
                                        {% for recommendation in analysis.recommendations %}
                                            <li class="list-group-item">
                                                <i class="fas fa-arrow-right text-primary me-2"></i>{{ recommendation }}
                                            </li>
                                        {% endfor %}
                                    </ul>
                                </div>
                            </div>
                        </div>
                    </div>
                    {% endif %}
                    
                    <!-- Second Analyze Another Repository Button - Outside Recommendations Box -->
                    <div class="text-center mt-4 mb-4">
                        <button class="btn btn-outline-primary btn-lg" onclick="window.location.href = window.location.pathname">
                            <i class="fas fa-arrow-left"></i> Analyze Another Repository
                        </button>
                    </div>
                </div>
                {% endif %}
            </div>
        </main>

        <!-- Footer -->
        <footer class="row mt-5 py-4 text-white" style="background: linear-gradient(135deg, #24292e 0%, #586069 100%);">
            <div class="col-12 text-center">
                <p>&copy; 2025 GitHub Repository Analyzer. Built with Flask and Bootstrap.</p>
                <p><small>This tool analyzes public repositories only and does not store any data.</small></p>
            </div>
        </footer>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script>
        // Form validation
        (function() {
            'use strict';
            window.addEventListener('load', function() {
                var forms = document.getElementsByClassName('needs-validation');
                var validation = Array.prototype.filter.call(forms, function(form) {
                    form.addEventListener('submit', function(event) {
                        if (form.checkValidity() === false) {
                            event.preventDefault();
                            event.stopPropagation();
                        }
                        form.classList.add('was-validated');
                    }, false);
                });
            }, false);
        })();

        // Auto-dismiss alerts after 5 seconds
        setTimeout(function() {
            var alerts = document.querySelectorAll('.alert');
            alerts.forEach(function(alert) {
                var bsAlert = new bootstrap.Alert(alert);
                bsAlert.close();
            });
        }, 5000);
    </script>

    <!-- All Issues Modal -->
    {% if analysis and analysis.code_quality.issues %}
    <div class="modal" id="allIssuesModal" tabindex="-1" aria-labelledby="allIssuesModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-lg modal-dialog-scrollable">
            <div class="modal-content">
                <div class="modal-header" style="background-color: #fff3cd; border-bottom: 1px solid #ffeaa7;">
                    <h5 class="modal-title text-dark" id="allIssuesModalLabel">
                        <i class="fas fa-exclamation-triangle text-warning"></i> All Code Quality Issues ({{ analysis.code_quality.issues|length }})
                    </h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body" style="max-height: 70vh; overflow-y: auto;">
                    {% if analysis.code_quality.issues and analysis.code_quality.issues|length > 0 %}
                        {% for issue in analysis.code_quality.issues %}
                            <div class="mb-3">
                                <div class="card border-warning">
                                    <div class="card-body py-2">
                                        <div class="d-flex justify-content-between align-items-start">
                                            <div class="flex-grow-1">
                                                <h6 class="card-title mb-1">
                                                    <i class="fas fa-exclamation-triangle text-warning me-2"></i>
                                                    <strong>{{ issue.get('type', 'Code Issue').replace('_', ' ').title() }}</strong>
                                                </h6>
                                                <p class="card-text mb-1">
                                    <small class="text-muted">
                                        <i class="fas fa-map-marker-alt me-1"></i>
                                        {% set location = issue.get('location', 'Unknown location') %}
                                        {% if ':' in location %}
                                            {% set parts = location.split(':') %}
                                            <strong>{{ parts[0] }}</strong>:<span class="badge bg-secondary text-white ms-1">{{ parts[1] }}</span>
                                        {% else %}
                                            <strong>{{ location }}</strong>
                                        {% endif %}
                                    </small>
                                </p>
                                                {% if issue.get('description') %}
                                                <p class="card-text mb-0">
                                                    <small>{{ issue.get('description') }}</small>
                                                </p>
                                                {% endif %}
                                            </div>
                                            <span class="badge bg-warning text-dark ms-2">Issue</span>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        {% endfor %}
                    {% else %}
                        <div class="text-center py-4">
                            <i class="fas fa-check-circle text-success fa-3x mb-3"></i>
                            <h5>No Code Quality Issues Found</h5>
                            <p class="text-muted">Great! Your code appears to be clean and well-structured.</p>
                        </div>
                    {% endif %}
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">
                        <i class="fas fa-times"></i> Close
                    </button>
                </div>
            </div>
        </div>
    </div>
    {% endif %}

</body>
</html>